function CommentModuleManagerWrapper(k){window[k]=this;var d;this.initialize=function(b){d=b};this.showOrHideCommentsClick=function(b,a){if(a=a.getCommentModuleObject())a.isVisible()?(a.hide(),b.text(0<a.getCommentsCount()?d.strings.showComments:d.strings.addComment)):(1===b.data("commentsLoaded")?a.show():(a.loadAndShow(),b.data("commentsLoaded",1)),b.text(d.strings.hideComments));return!1};this.addComment=function(b,a,c,e,f,g,h){CCL.CommonFunctions.safeAjaxPost({datatype:"json",url:d.urls.addComment,
data:{sourceId:a.sourceId,sourceType:a.sourceType,text:c,lastVisibleCommentId:e,usePersonNameFormatLastFirst:f}}).done(function(a){g(b,a)}).fail(function(){h(b)})};this.editComment=function(b,a,c,e,f,g,h){CCL.CommonFunctions.safeAjax({type:"PUT",datatype:"json",url:d.urls.editComment.replace("{commentId}",c),data:{text:e,usePersonNameFormatLastFirst:f}}).done(function(a){g(b,a)}).fail(function(a){h(b,c,a)})};this.deleteComment=function(b,a,c,e,f){CCL.CommonFunctions.safeAjax({type:"DELETE",datatype:"json",
url:d.urls.deleteComment.replace("{commentId}",c)}).done(function(a){e(b,c,a)}).fail(function(a){f(b,c,a)})};this.loadOld=function(b,a,c,e,f,g,h,k){$.ajax({type:"GET",datatype:"json",url:d.urls.getOld,data:{sourceId:a.sourceId,sourceType:a.sourceType,commentId:c,count:e,numberOfPreviouslyReadItemsToDisplay:f,usePersonNameFormatLastFirst:g}}).done(function(a){h(b,a)}).fail(function(a){k(b,a)})};return this};
